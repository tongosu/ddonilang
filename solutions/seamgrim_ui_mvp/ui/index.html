<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>셈그림</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="app">
      <section id="screen-browse" class="screen">
        <header class="topbar">
          <span class="brand">셈그림</span>
          <button id="btn-advanced-browse" class="ghost" type="button">⚙</button>
        </header>

        <div class="browse-tabs">
          <button class="browse-tab active" data-tab="official" type="button">★ 공식 교과</button>
          <button class="browse-tab" data-tab="search" type="button">🔍 검색</button>
          <button class="browse-tab" type="button" disabled title="AGE5">커뮤니티</button>
          <button id="btn-create" class="btn-primary" type="button">+ 만들기</button>
        </div>

        <div class="browse-filters">
          <select id="filter-grade">
            <option value="">학년: 전체</option>
          </select>
          <select id="filter-subject">
            <option value="">과목: 전체</option>
          </select>
          <select id="filter-run-status">
            <option value="">최근 실행: 전체</option>
            <option value="success">최근 실행: 성공</option>
            <option value="error">최근 실행: 실패</option>
            <option value="none">최근 실행: 미실행</option>
          </select>
          <select id="filter-sort">
            <option value="recent">정렬: 최근 실행순</option>
            <option value="default">정렬: 기본</option>
          </select>
          <input id="filter-query" type="text" placeholder="검색어 입력..." />
        </div>

        <div id="lesson-card-grid" class="card-grid"></div>
      </section>

      <section id="screen-editor" class="screen hidden">
        <header class="topbar">
          <button id="btn-back-to-browse" class="ghost" type="button">← 탐색</button>
          <span class="screen-title" id="editor-title">DDN 편집</span>
          <div class="editor-actions">
            <button id="btn-run-from-editor" class="btn-primary" type="button">▶ 실행</button>
            <button id="btn-save-ddn" class="ghost" type="button">↓ 저장</button>
            <button id="btn-advanced-editor" class="ghost" type="button">⚙</button>
          </div>
        </header>

        <div id="ddn-editor-area">
          <textarea id="ddn-textarea" spellcheck="false"></textarea>
        </div>

        <div id="editor-smoke-result" class="hint"></div>
      </section>

      <section id="screen-run" class="screen hidden">
        <header class="topbar run-topbar">
          <button id="btn-back-run" class="ghost" type="button">← 탐색</button>
          <button id="btn-edit-ddn" class="ghost" type="button">✏ DDN</button>
          <span id="run-lesson-title" class="lesson-title-display">-</span>
          <span id="run-last-summary" class="run-last-summary">최근 실행: 기록 없음</span>
          <button id="btn-overlay-toggle" class="ghost" type="button">설명</button>
          <button id="btn-advanced-run" class="ghost" type="button">⚙</button>
        </header>

        <div class="run-layout">
          <div class="bogae-area">
            <canvas id="canvas-bogae"></canvas>
            <div id="overlay-description" class="overlay-desc hidden"></div>
            <div class="bogae-range-controls">
              <div class="range-grid">
                <label>x_min <input id="bogae-x-min" type="number" step="any" /></label>
                <label>x_max <input id="bogae-x-max" type="number" step="any" /></label>
                <label>y_min <input id="bogae-y-min" type="number" step="any" /></label>
                <label>y_max <input id="bogae-y-max" type="number" step="any" /></label>
              </div>
              <div class="range-actions">
                <label class="preset-slot">
                  슬롯
                  <select id="bogae-preset-slot">
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                  </select>
                </label>
                <button id="btn-bogae-range-apply" class="ghost" type="button">보개 적용</button>
                <button id="btn-bogae-range-reset" class="ghost" type="button">보개 리셋</button>
                <button id="btn-bogae-range-save" class="ghost" type="button">보개 저장</button>
                <button id="btn-bogae-range-load" class="ghost" type="button">보개 불러오기</button>
              </div>
            </div>
            <div class="bogae-zoom-controls">
              <button id="btn-zoom-in" type="button">+</button>
              <button id="btn-zoom-out" type="button">-</button>
              <button id="btn-zoom-reset" type="button">⌂</button>
            </div>
          </div>

          <div class="dotbogi-panel">
            <div class="panel-tabs">
              <button class="panel-tab active" data-view="graph" type="button">그래프</button>
              <button class="panel-tab" data-view="table" type="button">표</button>
              <button class="panel-tab" data-view="text" type="button">설명</button>
            </div>

            <div id="dotbogi-graph" class="panel-content active">
              <div class="graph-toolbar">
                <label for="select-x-axis">x축</label>
                <select id="select-x-axis"></select>
                <label for="select-y-axis">y축</label>
                <select id="select-y-axis"></select>
                <button id="btn-axis-lock" class="ghost" type="button">기본축 고정: ON</button>
                <button id="btn-graph-reset" class="ghost" type="button">축 리셋</button>
              </div>
              <div class="graph-range-controls">
                <div class="range-grid">
                  <label>x_min <input id="graph-x-min" type="number" step="any" /></label>
                  <label>x_max <input id="graph-x-max" type="number" step="any" /></label>
                  <label>y_min <input id="graph-y-min" type="number" step="any" /></label>
                  <label>y_max <input id="graph-y-max" type="number" step="any" /></label>
                </div>
                <div class="range-actions">
                  <label class="preset-slot">
                    슬롯
                    <select id="graph-preset-slot">
                      <option value="1">1</option>
                      <option value="2">2</option>
                      <option value="3">3</option>
                    </select>
                  </label>
                  <button id="btn-graph-range-apply" class="ghost" type="button">축 적용</button>
                  <button id="btn-graph-range-reset" class="ghost" type="button">축 자동</button>
                  <button id="btn-graph-range-save" class="ghost" type="button">축 저장</button>
                  <button id="btn-graph-range-load" class="ghost" type="button">축 불러오기</button>
                </div>
              </div>
              <canvas id="canvas-graph"></canvas>
            </div>

            <div id="dotbogi-table" class="panel-content hidden">
              <table id="data-table"></table>
            </div>

            <div id="dotbogi-text" class="panel-content hidden">
              <div id="text-content" class="text-content"></div>
            </div>

            <div id="slider-panel" class="slider-panel">
              <div id="slider-status" class="hint">control: -</div>
              <div id="slider-list"></div>
              <button id="btn-restart" class="btn-primary" type="button">▶ 재실행</button>
            </div>
          </div>
        </div>

        <div class="statusbar">
          <span id="run-status">실행 상태: 대기</span>
          <span id="run-hash">state_hash: -</span>
        </div>
      </section>

      <div id="advanced-menu" class="advanced-menu hidden">
        <button id="advanced-smoke" type="button">Smoke 검증</button>
        <button type="button" class="age-slot" disabled>A 실시간 입력</button>
        <button type="button" class="age-slot" disabled>B 꾸러미 브라우저</button>
        <button type="button" class="age-slot" disabled>C 3D 렌더</button>
      </div>
    </div>

    <script type="module" src="./app.js"></script>
  </body>
</html>
